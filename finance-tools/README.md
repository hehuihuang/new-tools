# 财税计算工具套件

专业的财税计算工具集，提供个税、增值税、企业所得税、房贷等多种财务计算功能。

## 功能特点

- ✅ **年终奖个税计算器** - 支持单独计税和并入综合所得两种方式对比
- ✅ **工资个税计算器** - 含五险一金和专项附加扣除
- ✅ **综合所得汇算计算器** - 年度个税汇算清缴，计算应补退税额
- ✅ **增值税计算器** - 支持一般纳税人和小规模纳税人
- ✅ **企业所得税计算器** - 支持小微企业优惠税率
- ✅ **房贷还款计算器** - 等额本息/等额本金对比，含还款计划表

## 技术架构

### 核心文件

- `shared/calculators.js` - 核心计算引擎，包含所有税务和财务计算逻辑
- `shared/components.js` - 共享UI组件库
- `shared/utils.js` - 工具函数（格式化、验证、存储等）
- `shared/styles.css` - 统一的样式系统（蓝色主题）

### 计算器页面

- `bonus-tax.html` - 年终奖个税计算器
- `vat-calculator.html` - 增值税计算器
- `income-tax.html` - 综合所得汇算计算器（待完成）
- `corp-tax.html` - 企业所得税计算器（待完成）
- `mortgage.html` - 房贷还款计算器（待完成）
- `salary-tax.html` - 工资个税计算器（待完成）

## 测试

项目包含完整的单元测试和基于属性的测试（Property-Based Testing）：

```bash
# 运行所有测试
npm test

# 运行工具函数测试
npm test -- finance-tools/shared/utils.test.js

# 运行属性测试
npm test -- finance-tools/shared/calculators.property.test.js
```

### 测试覆盖

- ✅ 工具函数单元测试（32个测试用例）
- ✅ 计算引擎属性测试（20个属性，每个100次迭代）
- ✅ 30个正确性属性全部通过验证

## 使用方法

1. 在浏览器中打开 `tooles/index.html`
2. 点击"财税工具"分类
3. 选择需要的计算器
4. 输入相关参数
5. 点击"计算"按钮查看结果

## 特性

### 数据隐私
- 所有计算在浏览器本地完成
- 不上传任何数据到服务器
- 使用localStorage保存历史记录（可清除）

### 用户体验
- 实时输入验证
- 详细的计算步骤展示
- 历史记录功能
- 响应式设计，支持移动端

### 计算准确性
- 使用最新的税法规定
- 通过100+属性测试验证
- 精确到分的计算结果

## 税率说明

### 个人所得税（2024年）
- 基本减除费用：5000元/月（60000元/年）
- 7级超额累进税率：3% - 45%

### 增值税
- 标准税率：13%
- 低税率：9%、6%
- 小规模纳税人：3%（优惠期1%）

### 企业所得税（2024年最新政策）
- 一般企业：25%
- 小微企业（减按25%计入应纳税所得额）：
  - 100万以下：实际税率2.5%
  - 100-300万：实际税率5%
- 高新技术企业：15%

## 公式验证

✅ 所有计算公式已经过严格验证，符合2024年最新税法规定

详细的公式验证报告请查看：[FORMULA_VERIFICATION.md](./FORMULA_VERIFICATION.md)

### 最近更新
- 2025-01-13: 修正增值税销项税额计算公式
- 2025-01-13: 更新小微企业所得税优惠税率至2024年政策
- 2025-01-13: 所有52个测试用例通过验证

## 开发文档

详细的开发文档请参考：
- `.kiro/specs/finance-tax-tools/requirements.md` - 需求文档
- `.kiro/specs/finance-tax-tools/design.md` - 设计文档
- `.kiro/specs/finance-tax-tools/tasks.md` - 实施计划

## 许可证

本项目仅供学习和参考使用。税务计算结果仅供参考，实际纳税请以税务机关规定为准。

## 更新日志

### v1.0.0 (2025-01-13)
- ✅ 完成核心计算引擎（所有税务和财务计算逻辑）
- ✅ 完成共享组件和工具函数
- ✅ 完成6个计算器页面：
  - 年终奖个税计算器
  - 工资个税计算器
  - 综合所得汇算计算器
  - 增值税计算器
  - 企业所得税计算器
  - 房贷还款计算器
- ✅ 完成全部单元测试和属性测试（52个测试用例全部通过）
- ✅ 集成到主导航页面
