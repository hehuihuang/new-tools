# 财税计算工具套件需求文档

## 简介

本文档定义了一个综合性的财税计算工具套件，包含个人税务、企业财税、薪酬计算、投融资分析等多个领域的计算工具。该套件将作为独立的HTML页面集成到现有的在线工具箱平台中，为用户提供专业、准确、易用的财税计算服务。

## 术语表

- **系统 (System)**: 财税计算工具套件的整体应用
- **用户 (User)**: 使用财税计算工具的个人或企业用户
- **个税 (Individual Income Tax)**: 个人所得税
- **年终奖 (Year-end Bonus)**: 年度一次性奖金
- **综合所得 (Comprehensive Income)**: 包括工资薪金、劳务报酬、稿酬、特许权使用费的综合收入
- **增值税 (VAT)**: 增值税
- **企业所得税 (Corporate Income Tax)**: 企业所得税
- **五险一金 (Social Insurance and Housing Fund)**: 养老保险、医疗保险、失业保险、工伤保险、生育保险和住房公积金
- **等额本息 (Equal Principal and Interest)**: 每月还款金额相同的还款方式
- **等额本金 (Equal Principal)**: 每月还款本金相同的还款方式
- **ROI (Return on Investment)**: 投资回报率
- **IRR (Internal Rate of Return)**: 内部收益率
- **NPV (Net Present Value)**: 净现值

## 需求

### 需求 1: 年终奖个税计算器

**用户故事**: 作为一名员工，我想要计算年终奖的个人所得税，以便了解单独计税和并入综合所得两种方式下的税后收入差异。

#### 验收标准

1. WHEN 用户输入年终奖金额 THEN 系统 SHALL 计算单独计税方式下的应纳税额和税后收入
2. WHEN 用户输入年终奖金额和年度综合所得 THEN 系统 SHALL 计算并入综合所得方式下的应纳税额和税后收入
3. WHEN 系统完成两种计税方式的计算 THEN 系统 SHALL 显示两种方式的对比结果和推荐方案
4. WHEN 用户输入的年终奖金额为负数或非数字 THEN 系统 SHALL 显示错误提示并阻止计算
5. 系统 SHALL 使用最新的个人所得税税率表进行计算

### 需求 2: 综合所得年度汇算计算器

**用户故事**: 作为一名纳税人，我想要计算年度综合所得的应纳税额，以便了解是否需要补税或可以退税。

#### 验收标准

1. WHEN 用户输入工资薪金、劳务报酬、稿酬、特许权使用费收入 THEN 系统 SHALL 计算综合所得总额
2. WHEN 用户输入专项扣除、专项附加扣除、其他扣除 THEN 系统 SHALL 计算应纳税所得额
3. WHEN 系统完成应纳税所得额计算 THEN 系统 SHALL 根据税率表计算应纳税额
4. WHEN 用户输入已预缴税额 THEN 系统 SHALL 计算应补税额或应退税额
5. 系统 SHALL 显示详细的计算过程和各项扣除明细

### 需求 3: 增值税计算器

**用户故事**: 作为一名企业财务人员，我想要计算增值税，以便准确申报税款。

#### 验收标准

1. WHEN 用户选择纳税人类型（一般纳税人或小规模纳税人）THEN 系统 SHALL 应用相应的税率
2. WHEN 用户输入含税金额 THEN 系统 SHALL 计算不含税金额、税额和税率
3. WHEN 用户输入不含税金额 THEN 系统 SHALL 计算含税金额、税额和税率
4. WHEN 用户选择一般纳税人并输入进项税额 THEN 系统 SHALL 计算应纳增值税额
5. 系统 SHALL 支持13%、9%、6%、3%、1%等多种税率选择

### 需求 4: 企业所得税计算器

**用户故事**: 作为一名企业财务人员，我想要计算企业所得税，以便了解企业的税负情况。

#### 验收标准

1. WHEN 用户输入营业收入和营业成本 THEN 系统 SHALL 计算利润总额
2. WHEN 用户输入纳税调整项目 THEN 系统 SHALL 计算应纳税所得额
3. WHEN 系统完成应纳税所得额计算 THEN 系统 SHALL 根据企业类型应用相应税率
4. WHEN 企业符合小型微利企业条件 THEN 系统 SHALL 应用优惠税率计算
5. 系统 SHALL 显示详细的计算过程和税负率

### 需求 5: 房贷还款计算器

**用户故事**: 作为一名购房者，我想要计算房贷的月供和总利息，以便规划我的财务安排。

#### 验收标准

1. WHEN 用户输入贷款金额、贷款期限、贷款利率 THEN 系统 SHALL 计算等额本息方式下的月供金额
2. WHEN 用户选择等额本金还款方式 THEN 系统 SHALL 计算首月月供和逐月递减金额
3. WHEN 系统完成月供计算 THEN 系统 SHALL 计算贷款总利息和还款总额
4. WHEN 用户请求查看还款明细 THEN 系统 SHALL 生成完整的还款计划表
5. 系统 SHALL 支持商业贷款、公积金贷款、组合贷款三种类型

### 需求 6: 工资个税计算器

**用户故事**: 作为一名员工，我想要计算工资的个人所得税，以便了解我的税后收入。

#### 验收标准

1. WHEN 用户输入税前工资 THEN 系统 SHALL 计算五险一金扣除额
2. WHEN 用户输入专项附加扣除项目 THEN 系统 SHALL 计算总扣除额
3. WHEN 系统完成扣除额计算 THEN 系统 SHALL 计算应纳税所得额和应纳税额
4. WHEN 系统完成税额计算 THEN 系统 SHALL 显示税后工资
5. 系统 SHALL 支持用户自定义五险一金缴纳比例和基数

## 需求优先级

### 高优先级（第一批开发）
- 需求 1: 年终奖个税计算器
- 需求 2: 综合所得年度汇算计算器
- 需求 3: 增值税计算器
- 需求 4: 企业所得税计算器
- 需求 5: 房贷还款计算器
- 需求 6: 工资个税计算器

### 中优先级（后续扩展）
- 劳务报酬个税计算
- 稿酬所得个税计算
- 附加税费计算
- 契税计算
- 二手房税费计算

### 低优先级（未来规划）
- 跨境税务计算
- 投资回报率计算
- 内部收益率计算
- 股权激励个税测算

## 通用功能需求

### 需求 7: UI设计和用户体验

**用户故事**: 作为用户，我想要使用美观、易用的界面，以便快速完成计算任务。

#### 验收标准

1. 系统 SHALL 使用现代化的UI设计风格，避免使用紫色渐变
2. WHEN 用户访问任何计算器页面 THEN 系统 SHALL 显示清晰的输入表单和计算按钮
3. WHEN 用户完成输入并点击计算 THEN 系统 SHALL 在1秒内显示计算结果
4. WHEN 计算结果显示 THEN 系统 SHALL 使用卡片式布局展示关键数据
5. 系统 SHALL 在移动设备上保持良好的响应式布局

### 需求 8: 数据验证和错误处理

**用户故事**: 作为用户，我想要系统能够验证我的输入，以便避免计算错误。

#### 验收标准

1. WHEN 用户输入非数字字符到数字输入框 THEN 系统 SHALL 显示实时错误提示
2. WHEN 用户输入超出合理范围的数值 THEN 系统 SHALL 显示警告信息
3. WHEN 用户提交不完整的表单 THEN 系统 SHALL 高亮显示缺失的必填字段
4. WHEN 发生计算错误 THEN 系统 SHALL 显示友好的错误消息
5. 系统 SHALL 在用户输入时提供实时的格式化提示

### 需求 9: 计算结果展示

**用户故事**: 作为用户，我想要清晰地查看计算结果和详细过程，以便理解计算逻辑。

#### 验收标准

1. WHEN 系统完成计算 THEN 系统 SHALL 在结果区域显示关键数据的摘要
2. WHEN 用户查看计算结果 THEN 系统 SHALL 提供展开/折叠详细计算过程的选项
3. WHEN 用户请求查看详细过程 THEN 系统 SHALL 显示分步骤的计算明细
4. WHEN 计算涉及多个方案对比 THEN 系统 SHALL 使用对比表格或图表展示
5. 系统 SHALL 提供打印和导出计算结果的功能

### 需求 10: 本地存储和历史记录

**用户故事**: 作为用户，我想要系统能够保存我的计算历史，以便快速查看之前的计算结果。

#### 验收标准

1. WHEN 用户完成一次计算 THEN 系统 SHALL 将计算参数和结果保存到本地存储
2. WHEN 用户重新访问计算器页面 THEN 系统 SHALL 恢复上次的输入值
3. WHEN 用户点击历史记录按钮 THEN 系统 SHALL 显示最近10次的计算记录
4. WHEN 用户选择历史记录项 THEN 系统 SHALL 加载该记录的参数和结果
5. 系统 SHALL 提供清除历史记录的功能

## 技术约束

1. 所有计算器 SHALL 使用纯前端技术实现（HTML、CSS、JavaScript）
2. 系统 SHALL 不依赖后端服务器，所有计算在浏览器端完成
3. 系统 SHALL 使用localStorage进行数据持久化
4. 系统 SHALL 兼容Chrome、Firefox、Safari、Edge等主流浏览器
5. 系统 SHALL 遵循现有工具箱的代码结构和样式规范
