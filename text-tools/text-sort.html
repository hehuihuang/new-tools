<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ–‡æœ¬æ’åº - åœ¨çº¿å·¥å…·ç®±</title>
  <link rel="stylesheet" href="shared/styles.css">
</head>
<body>
  <div class="container">
    <header class="header">
      <a href="../tooles/index.html" class="back-link">â† è¿”å›å·¥å…·ç®±</a>
      <h1>æ–‡æœ¬æ’åºå·¥å…·</h1>
      <p>æ”¯æŒæŒ‰å­—å…¸åºã€æ•°å­—ã€é•¿åº¦æ’åºï¼Œå¯ç”¨äºåå•æ•´ç†ã€æ•°æ®é¢„å¤„ç†</p>
      <div class="privacy-notice">ğŸ”’ æ‰€æœ‰å¤„ç†å‡åœ¨æœ¬åœ°å®Œæˆï¼Œæ•°æ®ä¸ä¼šä¸Šä¼ </div>
    </header>

    <div class="card">
      <div class="card-title">æ’åºé€‰é¡¹</div>
      <div class="options-group">
        <div class="option-item">
          <input type="radio" name="mode" id="mode-alpha" value="alpha" checked>
          <label for="mode-alpha">å­—å…¸åº</label>
        </div>
        <div class="option-item">
          <input type="radio" name="mode" id="mode-numeric" value="numeric">
          <label for="mode-numeric">æ•°å­—æ’åº</label>
        </div>
        <div class="option-item">
          <input type="radio" name="mode" id="mode-length" value="length">
          <label for="mode-length">é•¿åº¦æ’åº</label>
        </div>
      </div>
      <div class="options-group">
        <div class="option-item">
          <input type="radio" name="order" id="order-asc" value="asc" checked>
          <label for="order-asc">å‡åº â†‘</label>
        </div>
        <div class="option-item">
          <input type="radio" name="order" id="order-desc" value="desc">
          <label for="order-desc">é™åº â†“</label>
        </div>
      </div>
    </div>

    <div class="dual-editor">
      <div class="card">
        <div class="card-title">è¾“å…¥æ–‡æœ¬ï¼ˆæ¯è¡Œä¸€é¡¹ï¼‰</div>
        <div class="editor-container">
          <textarea id="input" class="editor" placeholder="åœ¨æ­¤è¾“å…¥æˆ–ç²˜è´´æ–‡æœ¬ï¼Œæ¯è¡Œä¸€é¡¹..."></textarea>
        </div>
        <div class="btn-group">
          <button class="btn btn-primary" onclick="sortText()">æ’åº</button>
          <button class="btn btn-secondary" onclick="clearInput()">æ¸…ç©º</button>
        </div>
      </div>

      <div class="card">
        <div class="card-title">æ’åºç»“æœ</div>
        <div class="editor-container">
          <textarea id="output" class="editor" readonly placeholder="æ’åºç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ..."></textarea>
        </div>
        <div class="btn-group">
          <button class="btn btn-success" onclick="copyResult()">å¤åˆ¶ç»“æœ</button>
        </div>
        <div id="stats" class="stats"></div>
      </div>
    </div>
  </div>

  <script src="shared/components.js"></script>
  <script src="shared/utils.js"></script>
  <script>
    /**
     * å­—å…¸åºæ’åº
     */
    function sortAlpha(lines, desc = false) {
      return [...lines].sort((a, b) => {
        const cmp = a.localeCompare(b, 'zh-CN');
        return desc ? -cmp : cmp;
      });
    }

    /**
     * æ•°å­—æ’åº
     */
    function sortNumeric(lines, desc = false) {
      return [...lines].sort((a, b) => {
        const numA = parseFloat(a) || 0;
        const numB = parseFloat(b) || 0;
        return desc ? numB - numA : numA - numB;
      });
    }

    /**
     * é•¿åº¦æ’åº
     */
    function sortByLength(lines, desc = false) {
      return [...lines].sort((a, b) => {
        return desc ? b.length - a.length : a.length - b.length;
      });
    }

    /**
     * å¤„ç†æ’åº
     */
    function sortText() {
      const input = document.getElementById('input').value;
      const mode = document.querySelector('input[name="mode"]:checked').value;
      const desc = document.querySelector('input[name="order"]:checked').value === 'desc';
      
      if (!input.trim()) {
        showMessage('error', 'è¯·è¾“å…¥è¦æ’åºçš„æ–‡æœ¬');
        return;
      }
      
      const lines = splitLines(input);
      let sorted;
      
      switch (mode) {
        case 'alpha':
          sorted = sortAlpha(lines, desc);
          break;
        case 'numeric':
          sorted = sortNumeric(lines, desc);
          break;
        case 'length':
          sorted = sortByLength(lines, desc);
          break;
      }
      
      document.getElementById('output').value = joinLines(sorted);
      updateStats({
        'æ€»è¡Œæ•°': lines.length,
        'æ’åºæ–¹å¼': mode === 'alpha' ? 'å­—å…¸åº' : mode === 'numeric' ? 'æ•°å­—' : 'é•¿åº¦',
        'æ’åºæ–¹å‘': desc ? 'é™åº' : 'å‡åº'
      }, document.getElementById('stats'));
      
      showMessage('success', 'æ’åºå®Œæˆ');
    }

    function clearInput() {
      document.getElementById('input').value = '';
      document.getElementById('output').value = '';
      document.getElementById('stats').innerHTML = '';
    }

    function copyResult() {
      const output = document.getElementById('output').value;
      if (!output) {
        showMessage('error', 'æ²¡æœ‰å¯å¤åˆ¶çš„å†…å®¹');
        return;
      }
      copyToClipboard(output);
    }
  </script>
</body>
</html>
